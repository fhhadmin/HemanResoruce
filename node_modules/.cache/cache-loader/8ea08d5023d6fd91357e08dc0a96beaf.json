{"remainingRequest":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_WorkSpace\\sg-Admin\\src\\components\\uploadSingle\\UploadSingle.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Vue_WorkSpace\\sg-Admin\\src\\components\\uploadSingle\\UploadSingle.vue","mtime":1551411055210},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\.babelrc","mtime":1551258011000},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1551930361523},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1526583314000},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1526010763000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getQiniuToken } from '@/api/data';\nimport config from '@/config';\nexport default {\n  props: ['maxCount'],\n  mounted: function mounted() {\n    var _this = this;\n\n    getQiniuToken().then(function (res) {\n      _this.token = res.data;\n    });\n    this.uploadList = this.$refs.upload.fileList;\n  },\n  data: function data() {\n    return {\n      token: '',\n      uploadList: [],\n      key: \"admin_\".concat(new Date().getTime(), \".png\")\n    };\n  },\n  methods: {\n    uploadSuccess: function uploadSuccess(res, file, fileList) {\n      this.fileListChange(fileList);\n    },\n    removeFile: function removeFile(file, fileList) {\n      this.fileListChange(fileList);\n    },\n    fileListChange: function fileListChange(fileList) {\n      var arr = [];\n      fileList.forEach(function (item) {\n        arr.push(item.response.key);\n      });\n      this.$emit('change', arr.join(','));\n    },\n    handleBeforeUpload: function handleBeforeUpload(e) {\n      // console.log(e)\n      this.generateKey(e);\n      var check = this.uploadList.length < parseInt(this.maxCount);\n\n      if (!check) {\n        this.$Notice.warning({\n          title: \"\\u6700\\u591A\\u652F\\u6301\\u540C\\u65F6\\u4E0A\\u4F20 \".concat(this.maxCount, \" \\u5F20\\u4E2A\\u6587\\u4EF6\\uFF01.\")\n        });\n      }\n\n      return check;\n    },\n    generateKey: function generateKey(e) {\n      var file = e.name;\n      var index = file.lastIndexOf('.');\n      this.key = 'admin_' + new Date().getTime() + '_' + this.createUid(8, 16) + '.' + file.substr(index + 1);\n      return true;\n    },\n    createUid: function createUid(len, radix) {\n      var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n      var uuid = [],\n          i;\n      radix = radix || chars.length;\n\n      if (len) {\n        // Compact form\n        for (i = 0; i < len; i++) {\n          uuid[i] = chars[0 | Math.random() * radix];\n        }\n      } else {\n        // rfc4122, version 4 form\n        var r; // rfc4122 requires these characters\n\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n        uuid[14] = '4';\n\n        for (i = 0; i < 36; i++) {\n          if (!uuid[i]) {\n            r = 0 | Math.random() * 16;\n            uuid[i] = chars[i == 19 ? r & 0x3 | 0x8 : r];\n          }\n        }\n      }\n\n      return uuid.join('');\n    }\n  }\n};",{"version":3,"sources":["UploadSingle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AAEA;UAEA;;AACA;;wCACA;wBACA;AACA;wCACA;AACA;wBACA;;aAEA;kBACA;sCACA,AACA;AAJA;AAKA;;+DAEA;0BACA;AACA;oDACA;0BACA;AACA;sDACA;gBACA;uCACA;+BACA;AACA;oCACA;AACA;uDACA;AACA;uBACA;yDACA;;kBACA;;iFAEA,AACA;AAFA;AAGA;;aACA;AAEA;yCACA;mBACA;mCACA;2GACA;aACA;AAEA;8CACA;yFACA;;UACA;6BAEA;;eACA;AACA;;8CACA;;aACA;AACA;YAEA,GACA;;mDACA;mBAEA;;iCACA;wBACA;oCACA;sDACA;AACA;AACA;AAEA;;uBACA;AACA,AACA;AA3DA;AAfA","file":"UploadSingle.vue","sourceRoot":"src\\components\\uploadSingle","sourcesContent":["<!--\r\n * @description:\r\n * @Author: 9thArts@LucasWang\r\n * @Date: 2019-02-19\r\n * @LastEditors: 9thArts@LucasWang\r\n * @LastEditTime: 2019-02-22\r\n  * 上传单个\r\n -->\r\n<template>\r\n  <Upload\r\n    ref=\"upload\"\r\n    action=\"//upload.qiniup.com\"\r\n      :data=\"{token: token, key: key}\"\r\n      :format=\"['jpg','jpeg','png']\"\r\n      :on-success=\"uploadSuccess\"\r\n      :on-remove =\"removeFile\"\r\n      :before-upload=\"handleBeforeUpload\"\r\n    >\r\n        <Button icon=\"ios-cloud-upload-outline\">上传图片</Button>\r\n  </Upload>\r\n\r\n</template>\r\n<script>\r\nimport { getQiniuToken } from '@/api/data'\r\nimport config from '@/config'\r\n\r\nexport default {\r\n  props: ['maxCount'],\r\n  mounted () {\r\n    getQiniuToken().then(res => {\r\n      this.token = res.data\r\n    })\r\n    this.uploadList = this.$refs.upload.fileList\r\n  },\r\n  data () {\r\n    return {\r\n      token: '',\r\n      uploadList: [],\r\n      key: `admin_${new Date().getTime()}.png`\r\n    }\r\n  },\r\n  methods: {\r\n    uploadSuccess (res, file, fileList) {\r\n      this.fileListChange(fileList)\r\n    },\r\n    removeFile (file, fileList) {\r\n      this.fileListChange(fileList)\r\n    },\r\n    fileListChange (fileList) {\r\n      let arr = []\r\n      fileList.forEach(item => {\r\n        arr.push(item.response.key)\r\n      })\r\n      this.$emit('change', arr.join(','))\r\n    },\r\n    handleBeforeUpload (e) {\r\n      // console.log(e)\r\n      this.generateKey(e)\r\n      const check = this.uploadList.length < parseInt(this.maxCount)\r\n      if (!check) {\r\n        this.$Notice.warning({\r\n          title: `最多支持同时上传 ${this.maxCount} 张个文件！.`\r\n        })\r\n      }\r\n      return check\r\n    },\r\n\r\n    generateKey (e) {\r\n      const file = e.name\r\n      const index = file.lastIndexOf('.')\r\n      this.key = 'admin_' + new Date().getTime() + '_' + this.createUid(8, 16) + '.' + file.substr(index + 1)\r\n      return true\r\n    },\r\n\r\n    createUid (len, radix) {\r\n      var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('')\r\n      var uuid = [], i\r\n      radix = radix || chars.length\r\n\r\n      if (len) {\r\n        // Compact form\r\n        for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix]\r\n      } else {\r\n        // rfc4122, version 4 form\r\n        var r\r\n\r\n        // rfc4122 requires these characters\r\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-'\r\n        uuid[14] = '4'\r\n\r\n        for (i = 0; i < 36; i++) {\r\n          if (!uuid[i]) {\r\n            r = 0 | Math.random() * 16\r\n            uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r]\r\n          }\r\n        }\r\n      }\r\n\r\n      return uuid.join('')\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n\r\n</style>\r\n"]}]}