{"remainingRequest":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_WorkSpace\\sg-Admin\\src\\components\\uploadSingle\\uploadFile.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Vue_WorkSpace\\sg-Admin\\src\\components\\uploadSingle\\uploadFile.vue","mtime":1552015658247},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\.babelrc","mtime":1551258011000},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1551930361523},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1526583314000},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1526010763000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getQiniuToken } from '@/api/data';\nimport config from '@/config';\nexport default {\n  props: ['maxCount'],\n  mounted: function mounted() {\n    var _this = this;\n\n    getQiniuToken().then(function (res) {\n      _this.token = res.data;\n    });\n    this.uploadList = this.$refs.upload.fileList;\n  },\n  data: function data() {\n    return {\n      token: '',\n      uploadList: [],\n      key: \"admin_\".concat(new Date().getTime(), \".xls\")\n    };\n  },\n  methods: {\n    uploadSuccess: function uploadSuccess(res, file, fileList) {\n      this.fileListChange(fileList);\n    },\n    removeFile: function removeFile(file, fileList) {\n      this.fileListChange(fileList);\n    },\n    fileListChange: function fileListChange(fileList) {\n      var arr = [];\n      fileList.forEach(function (item) {\n        arr.push(item.response.key);\n      });\n      this.$emit('change', arr.join(','));\n    },\n    handleBeforeUpload: function handleBeforeUpload(e) {\n      // console.log(e)\n      this.generateKey(e);\n      var check = this.uploadList.length < parseInt(this.maxCount);\n\n      if (!check) {\n        this.$Notice.warning({\n          title: \"\\u6700\\u591A\\u652F\\u6301\\u540C\\u65F6\\u4E0A\\u4F20 \".concat(this.maxCount, \" \\u5F20\\u4E2A\\u6587\\u4EF6\\uFF01.\")\n        });\n      }\n\n      return check;\n    },\n    generateKey: function generateKey(e) {\n      var file = e.name;\n      var index = file.lastIndexOf('.');\n      this.key = 'admin_' + new Date().getTime() + '_' + this.createUid(8, 16) + '.' + file.substr(index + 1);\n      return true;\n    },\n    createUid: function createUid(len, radix) {\n      var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n      var uuid = [],\n          i;\n      radix = radix || chars.length;\n\n      if (len) {\n        // Compact form\n        for (i = 0; i < len; i++) {\n          uuid[i] = chars[0 | Math.random() * radix];\n        }\n      } else {\n        // rfc4122, version 4 form\n        var r; // rfc4122 requires these characters\n\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n        uuid[14] = '4';\n\n        for (i = 0; i < 36; i++) {\n          if (!uuid[i]) {\n            r = 0 | Math.random() * 16;\n            uuid[i] = chars[i == 19 ? r & 0x3 | 0x8 : r];\n          }\n        }\n      }\n\n      return uuid.join('');\n    }\n  }\n};",{"version":3,"sources":["uploadFile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AAEA;UAEA;;AACA;;wCACA;wBACA;AACA;wCACA;AACA;wBACA;;aAEA;kBACA;sCACA,AACA;AAJA;AAKA;;+DAEA;0BACA;AACA;oDACA;0BACA;AACA;sDACA;gBACA;uCACA;+BACA;AACA;oCACA;AACA;uDACA;AACA;uBACA;yDACA;;kBACA;;iFAEA,AACA;AAFA;AAGA;;aACA;AAEA;yCACA;mBACA;mCACA;2GACA;aACA;AAEA;8CACA;yFACA;;UACA;6BAEA;;eACA;AACA;;8CACA;;aACA;AACA;YAEA,GACA;;mDACA;mBAEA;;iCACA;wBACA;oCACA;sDACA;AACA;AACA;AAEA;;uBACA;AACA,AACA;AA3DA;AAfA","file":"uploadFile.vue","sourceRoot":"src\\components\\uploadSingle","sourcesContent":["<!--\n * @description:\n * @Author: 9thArts@LucasWang\n * @Date: 2019-02-19\n * @LastEditors: 9thArts@LucasWang\n * @LastEditTime: 2019-02-22\n  * 上传单个\n -->\n<template>\n  <Upload\n    ref=\"upload\"\n    action=\"//192.168.31.19:80/admin/proMaterial/importMaterial\"\n      :format =\"['xlsx','xls']\"\n      :on-success=\"uploadSuccess\"\n      :on-remove =\"removeFile\"\n      :before-upload=\"handleBeforeUpload\"\n    >\n    <Button icon=\"ios-cloud-upload-outline\">上传文件</Button>\n  </Upload>\n\n</template>\n<script>\nimport { getQiniuToken } from '@/api/data'\nimport config from '@/config'\n\nexport default {\n  props: ['maxCount'],\n  mounted () {\n    getQiniuToken().then(res => {\n      this.token = res.data\n    })\n    this.uploadList = this.$refs.upload.fileList\n  },\n  data () {\n    return {\n      token: '',\n      uploadList: [],\n      key: `admin_${new Date().getTime()}.xls`\n    }\n  },\n  methods: {\n    uploadSuccess (res, file, fileList) {\n      this.fileListChange(fileList)\n    },\n    removeFile (file, fileList) {\n      this.fileListChange(fileList)\n    },\n    fileListChange (fileList) {\n      let arr = []\n      fileList.forEach(item => {\n        arr.push(item.response.key)\n      })\n      this.$emit('change', arr.join(','))\n    },\n    handleBeforeUpload (e) {\n      // console.log(e)\n      this.generateKey(e)\n      const check = this.uploadList.length < parseInt(this.maxCount)\n      if (!check) {\n        this.$Notice.warning({\n          title: `最多支持同时上传 ${this.maxCount} 张个文件！.`\n        })\n      }\n      return check\n    },\n\n    generateKey (e) {\n      const file = e.name\n      const index = file.lastIndexOf('.')\n      this.key = 'admin_' + new Date().getTime() + '_' + this.createUid(8, 16) + '.' + file.substr(index + 1)\n      return true\n    },\n\n    createUid (len, radix) {\n      var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('')\n      var uuid = [], i\n      radix = radix || chars.length\n\n      if (len) {\n        // Compact form\n        for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix]\n      } else {\n        // rfc4122, version 4 form\n        var r\n\n        // rfc4122 requires these characters\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-'\n        uuid[14] = '4'\n\n        for (i = 0; i < 36; i++) {\n          if (!uuid[i]) {\n            r = 0 | Math.random() * 16\n            uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r]\n          }\n        }\n      }\n\n      return uuid.join('')\n    }\n  }\n}\n</script>\n<style>\n\n</style>\n"]}]}