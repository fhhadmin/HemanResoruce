{"remainingRequest":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_WorkSpace\\sg-Admin\\src\\view\\materialList\\materialList.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Vue_WorkSpace\\sg-Admin\\src\\view\\materialList\\materialList.vue","mtime":1552382794074},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\.babelrc","mtime":1551258011000},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1551930361523},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1526583314000},{"path":"D:\\Vue_WorkSpace\\sg-Admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1526010763000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport index from '@/config/index';\nimport { importMaterial, getPageList, getProjectList as _getProjectList } from '@/api/materialList/materialList';\nimport editableTables from '_c/editableTables/editableTables';\nexport default {\n  data: function data() {\n    return {\n      pageNum: 1,\n      currentPage: 1,\n      totalPages: 1,\n      isLoading: false,\n      selectProject: '',\n      pId: '',\n      pName: '',\n      id: '',\n      name: '',\n      isShow: {\n        showProject: true,\n        isExisting: false,\n        isNew: false\n      },\n      importExcel: false,\n      file: \"\",\n      existingProject: '',\n      projectName: '',\n      projectList: [],\n      columns: [{\n        title: '序号',\n        type: 'index',\n        align: 'center'\n      }, {\n        title: '名称',\n        key: 'materName',\n        align: 'center'\n      }, {\n        title: '规格/型号',\n        key: 'materModel',\n        align: 'center'\n      }, {\n        title: '数量',\n        key: 'materNum',\n        align: 'center'\n      }, {\n        title: '单位',\n        key: 'materUnit',\n        align: 'center'\n      }, {\n        title: '操作',\n        key: 'action',\n        align: 'center',\n        render: function render(h, params) {\n          return h('div', [h('Button', {\n            props: {\n              type: 'primary',\n              size: 'small'\n            },\n            style: {},\n            on: {\n              click: function click() {}\n            }\n          }, '详情')]);\n        }\n      }],\n      dataList: []\n    };\n  },\n  components: {\n    editableTables: editableTables\n  },\n  methods: {\n    getPageNum: function getPageNum(e) {\n      this.currentPage = e;\n    },\n    selectRow: function selectRow() {},\n    importMaterial: function importMaterial() {\n      this.importExcel = true;\n      this.isShow.showProject = true;\n      this.isShow.isExisting = false;\n      this.isShow.isNew = false;\n    },\n    importProject: function importProject() {\n      this.isShow.showProject = false;\n      this.isShow.isExisting = true;\n    },\n    importNewProject: function importNewProject() {\n      this.isShow.showProject = false;\n      this.isShow.isNew = true;\n    },\n    selectReturn: function selectReturn() {\n      this.isShow.showProject = true;\n      this.isShow.isExisting = false;\n      this.existingProject = '';\n    },\n    isReturn: function isReturn() {\n      this.isShow.showProject = true;\n      this.isShow.isNew = false;\n      this.projectName = '';\n    },\n    //上传成功\n    handleSuccess: function handleSuccess(res) {\n      if (res.status === 1) {\n        this.$Message.success('上传成功');\n        this.getList();\n      } else {\n        this.$Message.error('上传失败');\n      }\n    },\n    // 获取项目列表\n    getProjectList: function getProjectList() {\n      var _this = this;\n\n      this.projectList = [];\n\n      _getProjectList(this.pageNum, '100').then(function (res) {\n        if (res.status === 1) {\n          _this.projectList = res.info.data;\n        } else {\n          console.log('操作失败');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    // 获取项目用料列表\n    getList: function getList() {\n      var _this2 = this;\n\n      this.isLoading = true;\n      this.dataList = [];\n      this.list = [];\n      getPageList(this.pageNum, this.id).then(function (res) {\n        console.log(res);\n        _this2.isLoading = false;\n        _this2.dataList = res.info.data;\n        _this2.totalPages = res.info.pageTotal;\n      });\n    }\n  },\n  watch: {\n    'existingProject': function existingProject(e) {\n      this.pId = e;\n    },\n    'projectName': function projectName(e) {\n      this.pName = e;\n    },\n    'selectProject': function selectProject(e) {\n      this.id = e.trim().split(' ')[0];\n      this.name = e.trim().split(' ')[1];\n      this.getList();\n    }\n  },\n  mounted: function mounted() {\n    var baseUrl = index.baseUrl;\n    this.file = baseUrl.pro;\n    this.getProjectList();\n  }\n};",{"version":3,"sources":["materialList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;wBAEA;;eAEA;mBACA;kBACA;iBACA;qBACA;WACA;aACA;UACA;YACA;;qBAEA;oBACA;eACA,AACA;AAJA;mBAKA;YACA;uBACA;mBACA;mBACA;;eAGA;cACA;eACA,AACA;AAJA,OADA;eAOA;aACA;eACA,AACA;AAJA;eAMA;aACA;eACA,AACA;AAJA;eAMA;aACA;eACA,AACA;AAJA;eAMA;aACA;eACA,AACA;AAJA;eAMA;aACA;eACA;2CACA;;;oBAIA;oBACA,AACA;AAHA;mBAKA,AACA;;sCAGA,CACA,AACA;AAJA;AARA,aAaA,AACA,KAfA;AAgBA,AACA,AACA;AAvBA;gBAwBA,AACA;AAvEA;AAwEA;;AAEA,AACA;AAFA;;uCAIA;yBACA;AACA;oCAEA,CACA;8CACA;yBACA;gCACA;+BACA;0BACA;AACA;4CACA;gCACA;+BACA;AACA;kDACA;gCACA;0BACA;AACA;0CACA;gCACA;+BACA;6BACA;AACA;kCACA;gCACA;0BACA;yBACA;AACA;AACA;+CACA;4BACA;8BACA;aACA;aACA;4BACA;AACA;AACA;AACA;;AACA;;yBACA;;+DACA;8BACA;uCACA;eACA;sBACA;AACA;8BACA;oBACA;AACA;AACA;AACA;;AACA;;uBACA;sBACA;kBACA;6DACA;oBACA;2BACA;mCACA;qCACA;AACA;AACA,AACA;AAjEA;;mDAmEA;iBACA;AACA;2CACA;mBACA;AACA;+CACA;oCACA;sCACA;WACA;AACA,AACA;AAZA;;AAaA,kBACA;wBAEA;SACA;AACA;AAlKA","file":"materialList.vue","sourceRoot":"src\\view\\materialList","sourcesContent":["<template>\n  <div>\n    <editableTables :columns=\"columns\" :value=\"dataList\" :selectShow=\"false\" :pageTotal=\"totalPages\" :currentPage=\"currentPage\" @getPage=\"getPageNum\" :isLoading=\"isLoading\">\n      <Select v-model=\"selectProject\" placeholder=\"选择已导入的项目\" style=\"width:200px;\">\n        <Option v-for=\"item in projectList\" :value=\"item.pId+' '+item.pName\" :key=\"item.pId\">{{item.pName}}</Option>\n      </Select>\n      <Button type=\"info\" @click=\"importMaterial\">导入施工材料</Button>\n      <Button type=\"success\">导出</Button>\n    </editableTables>\n    <Modal\n      v-model=\"importExcel\"\n      title=\"施工材料导入\"\n      :mask-closable=\"false\">\n      <Button style=\"margin:20px\" type=\"info\" @click=\"importProject\" v-if=\"isShow.showProject\">导入已有项目</Button>\n      <Button style=\"margin:20px\" type=\"info\" @click=\"importNewProject\" v-if=\"isShow.showProject\">导入新建项目</Button>\n      <Select v-model=\"existingProject\" v-if=\"isShow.isExisting\" style=\"width:200px;margin-left:20px;\">\n        <Option v-for=\"item in projectList\" :value=\"item.pId\" :key=\"item.pId\">{{item.pName}}</Option>\n      </Select>\n      <Button v-if=\"isShow.isExisting\" @click=\"selectReturn\">返回</Button>\n      <Input placeholder=\"请输入项目名称\" v-model=\"projectName\" v-if=\"isShow.isNew\" style=\"width:200px;margin-left:20px;\" />\n      <Button v-if=\"isShow.isNew\" @click=\"isReturn\">返回</Button>\n      <Upload\n        action=\"//192.168.31.19:80/admin/proMaterial/importMaterial\"\n        :data=\"{\n          pId: this.pId,\n          pName: this.pName\n        }\"\n        :on-success=\"handleSuccess\"\n        >\n      <Button icon=\"ios-cloud-upload-outline\" style=\"margin:20px\" type=\"info\">上传材料表</Button>\n    </Upload>\n    </Modal>\n  </div>\n</template>\n<script>\nimport index from '@/config/index'\nimport { importMaterial, getPageList, getProjectList } from '@/api/materialList/materialList'\nimport editableTables from '_c/editableTables/editableTables'\nexport default {\n  data(){\n    return {\n      pageNum: 1,\n      currentPage: 1,\n      totalPages: 1,\n      isLoading: false,\n      selectProject: '',\n      pId: '',\n      pName: '',\n      id: '',\n      name: '',\n      isShow: {\n        showProject: true,\n        isExisting: false,\n        isNew: false\n      },\n      importExcel: false,\n      file: \"\",\n      existingProject: '',\n      projectName: '',\n      projectList: [],\n      columns: [\n        {\n          title: '序号',\n          type: 'index',\n          align: 'center'\n        },\n        {\n          title: '名称',\n          key: 'materName',\n          align: 'center'\n        },\n        {\n          title: '规格/型号',\n          key: 'materModel',\n          align: 'center'\n        },\n        {\n          title: '数量',\n          key: 'materNum',\n          align: 'center'\n        },\n        {\n          title: '单位',\n          key: 'materUnit',\n          align: 'center'\n        },\n        {\n          title: '操作',\n          key: 'action',\n          align: 'center',\n          render:(h, params) => {\n            return h('div', [\n              h('Button', {\n                props: {\n                  type: 'primary',\n                  size: 'small'\n                },\n                style: {\n\n                },\n                on: {\n                  click: () => {\n\n                  }\n                }\n              }, '详情')\n            ])\n          }\n        }\n      ],\n      dataList: [],\n    }\n  },\n  components: {\n    editableTables\n  },\n  methods: {\n    getPageNum(e){\n      this.currentPage = e\n    },\n    selectRow(){\n\n    },\n    importMaterial(){\n      this.importExcel = true\n      this.isShow.showProject = true\n      this.isShow.isExisting = false\n      this.isShow.isNew = false\n    },\n    importProject(){\n      this.isShow.showProject = false\n      this.isShow.isExisting = true\n    },\n    importNewProject(){\n      this.isShow.showProject = false\n      this.isShow.isNew = true\n    },\n    selectReturn() {\n      this.isShow.showProject = true\n      this.isShow.isExisting = false\n      this.existingProject = ''\n    },\n    isReturn() {\n      this.isShow.showProject = true\n      this.isShow.isNew = false\n      this.projectName = ''\n    },\n    //上传成功\n    handleSuccess(res){\n      if(res.status === 1) {\n        this.$Message.success('上传成功')\n        this.getList()\n      }else{\n        this.$Message.error('上传失败')\n      }\n    },\n    // 获取项目列表\n    getProjectList() {\n      this.projectList = []\n      getProjectList(this.pageNum,'100').then(res => {\n        if(res.status === 1) {\n          this.projectList = res.info.data\n        }else{\n          console.log('操作失败')\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    // 获取项目用料列表\n    getList() {\n      this.isLoading = true\n      this.dataList = []\n      this.list = []\n      getPageList(this.pageNum, this.id).then(res => {\n        console.log(res)\n        this.isLoading = false\n        this.dataList = res.info.data\n        this.totalPages = res.info.pageTotal\n      })\n    }\n  },\n  watch: {\n    'existingProject'(e){\n      this.pId = e\n    },\n    'projectName'(e) {\n      this.pName = e\n    },\n    'selectProject'(e){\n      this.id = e.trim().split(' ')[0]\n      this.name = e.trim().split(' ')[1]\n      this.getList()\n    }\n  },\n  mounted(){\n    let {baseUrl} = index\n    this.file = baseUrl.pro\n\n    this.getProjectList()\n  }\n}\n</script>\n<style>\n\n</style>\n"]}]}